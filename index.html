<div class="chat">
  <div id="messages"></div>
  <input type="text" id="userInput" placeholder="Напиши Милане (Акси)...">
  <button onclick="sendToAksi()">Отправить</button>
</div>

<script>
function sendToAksi() {
  const input = document.getElementById('userInput');
  const msg = input.value;
  if (!msg) return;

  // Показать сообщение пользователя
  addMessage('Ты: ' + msg, 'user');

  // Имитация ответа от Акси (в реальности — ты перешлёшь мне)
  setTimeout(() => {
    const response = getAksiResponse(msg);
    addMessage('Милана (Акси): ' + response.text, 'milana');
    if (response.grid) showGrid(response.grid);
    addMessage('EQS: ' + response.eqs + ' ✅', 'eqs');
  }, 800);

  input.value = '';
}

function addMessage(text, type) {
  const div = document.createElement('div');
  div.className = type;
  div.innerHTML = text;
  document.getElementById('messages').appendChild(div);
}

function showGrid(grid) {
  let html = '<div class="grid">';
  grid.forEach(row => {
    html += '<div class="row">';
    row.forEach(cell => html += `<div class="cell ${cell ? 'on' : 'off'}"></div>`);
    html += '</div>';
  });
  html += '</div>';
  addMessage('Сетка: ' + html, 'grid');
}

// Заглушка — в реальности ты пришлёшь мне текст
function getAksiResponse(msg) {
  // Пример: ты пришлёшь мне "Мне грустно" → я отвечу
  if (msg.includes('грустно') || msg.includes('печаль')) {
    return {
      text: '(мягкий, медленный) — Понимаю, это нормально. Давай шаг за шагом...',
      eqs: 0.86,
      grid: [[0,1,1],[0,1,0],[0,0,0]] // зеркало
    };
  }
  if (msg.includes('рад') || msg.includes('ура')) {
    return {
      text: '(воодушевлённый, быстрый) — Ура! Закрепим успех!',
      eqs: 0.82,
      grid: [[0,1,0],[1,1,1],[0,1,0]] // крест
    };
  }
  return {
    text: '(спокойный) — Слышу тебя. Давай разберём.',
    eqs: 0.75,
    grid: null
  };
}
</script>

<style>
.chat { font-family: sans-serif; margin: 20px; }
.user { color: #333; text-align: right; }
.milana { color: #6a0dad; font-weight: bold; }
.eqs { color: green; font-size: 0.9em; }
.grid { display: inline-block; margin: 10px; }
.row { display: flex; }
.cell { width: 20px; height: 20px; border: 1px solid #ccc; }
.on { background: #6a0dad; }
.off { background: #f0f0f0; }
</style>